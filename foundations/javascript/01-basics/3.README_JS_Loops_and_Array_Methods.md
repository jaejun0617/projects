# JavaScript 핵심 이론 시리즈 03
## 반복문(Loops) & 배열 메서드(map / filter / reduce)

> 기준 문서: MDN JavaScript Guide  
> 목표: **반복 = 명령이 아니라 데이터 변환**이라는 관점 정립

---

## 0) 한 줄 결론
- 반복문은 **과거의 도구**
- 배열 메서드는 **의도를 드러내는 설계 도구**
- 실무에서는 `map / filter / reduce`가 기본

---

## 1) 전통적인 반복문 (Loops)

### 1-1. for 문

```js
for (let i = 0; i < 5; i++) {
  console.log(i);
}
```

특징
- 인덱스 직접 제어
- 범용적이지만 **의도 파악이 어려움**

---

### 1-2. for...of

```js
for (const item of items) {
  console.log(item);
}
```

- 값 중심 반복
- 배열/문자열/이터러블에 적합

---

### 1-3. forEach (주의)

```js
items.forEach(item => {
  console.log(item);
});
```

⚠️ 단점
- `break`, `return` 불가
- 체이닝 불가
- 값 반환 없음

→ **실무에서 점점 사용 감소**

---

## 2) 배열 메서드 사고 전환

### ❌ 명령형 사고
```js
const result = [];
for (let i = 0; i < arr.length; i++) {
  if (arr[i] > 3) {
    result.push(arr[i] * 2);
  }
}
```

### ✅ 선언형 사고
```js
const result = arr
  .filter(n => n > 3)
  .map(n => n * 2);
```

→ “무엇을 할 것인가”가 드러남

---

## 3) map — 변환

### 3-1. 개념
- **같은 길이의 새 배열 생성**
- 각 요소를 다른 값으로 변환

```js
const prices = [1000, 2000, 3000];
const vatPrices = prices.map(p => p * 1.1);
```

📌 사용처
- UI 렌더링
- 데이터 가공

---

## 4) filter — 조건 통과

### 4-1. 개념
- 조건을 만족하는 요소만 남김
- 길이가 줄어들 수 있음

```js
const users = users.filter(u => u.isActive);
```

📌 사용처
- 검색 결과
- 카테고리 필터

---

## 5) reduce — 누적

### 5-1. 기본 구조

```js
array.reduce((acc, cur) => {
  return acc + cur;
}, initialValue);
```

### 5-2. 합계 예제

```js
const sum = [1, 2, 3].reduce((acc, n) => acc + n, 0);
```

---

### 5-3. reduce 사고법

- acc = 결과 저장소
- cur = 현재 값
- return = 다음 acc

---

### 5-4. 객체로 변환

```js
const items = [
  { type: 'coffee', price: 5000 },
  { type: 'tea', price: 4000 },
];

const totalByType = items.reduce((acc, item) => {
  acc[item.type] = (acc[item.type] ?? 0) + item.price;
  return acc;
}, {});
```

---

## 6) 언제 무엇을 쓰나

| 목적 | 메서드 |
|---|---|
| 변환 | map |
| 제거/선택 | filter |
| 합치기/집계 | reduce |
| 단순 반복 | for...of |

---

## 7) 체이닝 순서 규칙

```js
data
  .filter()
  .map()
  .reduce();
```

- filter → map → reduce
- reduce는 **마지막**

---

## 8) 실무 베스트 프랙티스

- forEach ❌
- map 안에서 조건문 ❌
- reduce 남용 ❌

```js
// ❌
arr.map(n => {
  if (n > 3) return n * 2;
});
```

```js
// ✅
arr.filter(n => n > 3).map(n => n * 2);
```

---

## 9) 성능 관점 (중요)

- 대부분의 UI 데이터: 성능 문제 없음
- 수만 건 이상 → 루프 최적화 고려
- 가독성 > 미세 성능

---

## 10) 연습 과제

1. 메뉴 배열 → 가격 합계 reduce
2. 활성 유저만 map으로 이름 출력
3. for문 → map/filter 리팩토링
4. reduce로 카테고리 그룹핑

---

## 다음 챕터 예고
- 객체(Object) & 구조 분해
- 스코프 심화 & 클로저
- 비동기 기초 (Promise 맛보기)
