# Day 50 â€” History API (URL = State)

## ğŸ· Topic
History API / Client-side Routing / URL as State / SPA Navigation

## ğŸ” ê´€ë ¨ ê²€ìƒ‰ì–´
- history api pushstate popstate
- spa routing javascript
- url as state frontend
- cannot get todos spa
- client side routing history api

---

## âœ… í•œ ì¤„ ìš”ì•½
SPAì—ì„œ URLì€ ì´ë™ ê²½ë¡œê°€ ì•„ë‹ˆë¼  
**í˜„ì¬ í™”ë©´ ìƒíƒœë¥¼ í‘œí˜„í•˜ëŠ” ë˜ í•˜ë‚˜ì˜ ìƒíƒœ ê°’**ì´ë‹¤.

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš” (WHY)
Day 50ì€ â€œí˜ì´ì§€ë¥¼ ë‚˜ëˆ„ëŠ” ë²•â€ì„ ë°°ìš°ëŠ” ë‚ ì´ ì•„ë‹ˆë‹¤.  
**URLì„ ìƒíƒœë¡œ ì·¨ê¸‰í•´ì•¼ í•˜ëŠ” ì´ìœ ë¥¼ êµ¬ì¡°ì ìœ¼ë¡œ ì´í•´í•˜ëŠ” ë‹¨ê³„**ë‹¤.

SPAì—ì„œëŠ” ì‹¤ì œë¡œ í˜ì´ì§€ê°€ ì´ë™í•˜ì§€ ì•ŠëŠ”ë‹¤.  
ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ìš°ë¦¬ëŠ” ì™œ URLì„ ë°”ê¿€ê¹Œ?

- ìƒˆë¡œê³ ì¹¨ ë³µì›
- ë’¤ë¡œê°€ê¸° / ì•ìœ¼ë¡œê°€ê¸°
- í˜„ì¬ í™”ë©´ ê³µìœ 

ì´ ëª¨ë“  ìš”êµ¬ì‚¬í•­ì˜ í•´ë‹µì´  
**URL = State** ë¼ëŠ” ê°œë…ì´ë‹¤.

---

## ğŸ¯ ë¯¸ì…˜ ëª©í‘œ
- History APIì˜ ì—­í• ì„ ì´í•´í•œë‹¤
- URL ë³€ê²½ê³¼ ìƒíƒœ ë³€ê²½ì„ ë™ê¸°í™”í•œë‹¤
- ìƒˆë¡œê³ ì¹¨ / ë’¤ë¡œê°€ê¸°ì—ë„ í™”ë©´ì´ ìœ ì§€ë˜ê²Œ í•œë‹¤
- SPA ë¼ìš°íŒ…ì˜ ë³¸ì§ˆì„ ì²´ë“í•œë‹¤

---

## ğŸ§  í•µì‹¬ ì‚¬ê³ 

### 1ï¸âƒ£ URLì€ ìƒíƒœë‹¤
```js
state = { route: '/' };
```

- URLì€ ê²°ê³¼ âŒ
- URLì€ í˜„ì¬ ì•±ì˜ ìƒíƒœ â­•

---

### 2ï¸âƒ£ pushStateëŠ” í™”ë©´ ì´ë™ì´ ì•„ë‹ˆë‹¤
```js
history.pushState({ route }, '', route);
```

- ì„œë²„ ìš”ì²­ ì—†ìŒ
- í˜ì´ì§€ ì´ë™ ì—†ìŒ
- ìƒíƒœë§Œ ë³€ê²½

---

### 3ï¸âƒ£ popstateëŠ” ìƒíƒœ ë³µì› ì´ë²¤íŠ¸ë‹¤
```js
window.addEventListener('popstate', ...)
```

- ë’¤ë¡œê°€ê¸° / ì•ìœ¼ë¡œê°€ê¸°
- ì´ì „ ìƒíƒœë¥¼ ë³µì›
- UI ì¬ë Œë”ë§

---

## ğŸ§  í•µì‹¬ ì´ë¡  ë³´ê°•

### ì„œë²„ ë¼ìš°íŒ… vs í´ë¼ì´ì–¸íŠ¸ ë¼ìš°íŒ…

| êµ¬ë¶„ | ì„œë²„ ë¼ìš°íŒ… | í´ë¼ì´ì–¸íŠ¸ ë¼ìš°íŒ… |
|---|---|---|
| ì£¼ì²´ | ì„œë²„ | ë¸Œë¼ìš°ì € JS |
| ìƒˆë¡œê³ ì¹¨ | ì •ìƒ | ì„¤ì • í•„ìš” |
| URL ì˜ë¯¸ | ì‹¤ì œ ë¦¬ì†ŒìŠ¤ | ìƒíƒœ í‘œí˜„ |

ğŸ‘‰ `Cannot GET /todos`ëŠ” **SPAì˜ ì •ìƒ ë™ì‘ ê²°ê³¼**ë‹¤.

---

### ì™œ ìƒˆë¡œê³ ì¹¨ ì‹œ ì˜¤ë¥˜ê°€ ë‚˜ëŠ”ê°€
- ë¸Œë¼ìš°ì €ëŠ” `/todos`ë¥¼ ì„œë²„ì— ìš”ì²­
- ì„œë²„ëŠ” í•´ë‹¹ íŒŒì¼/ê²½ë¡œë¥¼ ëª¨ë¦„
- í•´ê²°ì±…ì€ **ëª¨ë“  ìš”ì²­ì„ index.htmlë¡œ fallback**

---

## ğŸ§© ìƒíƒœ ëª¨ë¸
```js
let state = {
  route: '/',
};
```

- route í•˜ë‚˜ë¡œ View ê²°ì •
- URLê³¼ í•­ìƒ ë™ê¸°í™”

---

## ğŸ§  í•µì‹¬ ì½”ë“œ ìŠ¤ëƒ…ìƒ·

### 1ï¸âƒ£ ë¼ìš°íŠ¸ ì´ë™
```js
function navigate(route) {
  history.pushState({ route }, '', route);
  state = { route };
  render();
}
```

---

### 2ï¸âƒ£ ë’¤ë¡œê°€ê¸° ì²˜ë¦¬
```js
window.addEventListener('popstate', (e) => {
  state = { route: e.state?.route || location.pathname };
  render();
});
```

---

### 3ï¸âƒ£ ì§ì ‘ ì§„ì… ëŒ€ì‘
```js
const initialRoute = location.pathname;
history.replaceState({ route: initialRoute }, '', initialRoute);
```

---

## âš™ï¸ êµ¬í˜„ ê¸°ì¤€ & ê¸°ë¥¸ ì—­ëŸ‰

### êµ¬í˜„ ê¸°ì¤€
- URL ë³€ê²½ = ìƒíƒœ ë³€ê²½
- renderëŠ” route ìƒíƒœë§Œ ì°¸ì¡°
- í˜ì´ì§€ ì´ë™ ë¡œì§ ì œê±°

### ê¸°ë¥¸ ì—­ëŸ‰
- SPA ë¼ìš°íŒ… ê¸°ë³¸ êµ¬ì¡° ì´í•´
- History API ì‹¤ì „ ì‚¬ìš©
- React Router ë™ì‘ ì›ë¦¬ ê¸°ë°˜ í™•ë³´

---

## ğŸ“‚ íŒŒì¼ êµ¬ì¡°
```
50-history-api-state/
â”œâ”€ index.html
â”œâ”€ css/
â”‚  â””â”€ style.css
â””â”€ js/
   â””â”€ main.js
```

---

## â˜‘ï¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] URLì„ ìƒíƒœë¡œ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€
- [ ] pushState / popstate ì°¨ì´ë¥¼ ì•„ëŠ”ê°€
- [ ] ìƒˆë¡œê³ ì¹¨ ë¬¸ì œì˜ ì›ì¸ì„ ì´í•´í–ˆëŠ”ê°€
- [ ] ì„œë²„ fallbackì´ ì™œ í•„ìš”í•œì§€ ì„¤ëª… ê°€ëŠ¥í•œê°€

---

## ğŸ¯ ì–»ì–´ê°€ëŠ” ì 
- URLì€ ë‹¨ìˆœ ì£¼ì†Œê°€ ì•„ë‹ˆë‹¤
- SPAëŠ” ìƒíƒœ ê¸°ë°˜ ì•±ì´ë‹¤
- ìƒˆë¡œê³ ì¹¨ ë¬¸ì œëŠ” ì„œë²„ ì„¤ì • ë¬¸ì œë‹¤
- ì´ êµ¬ì¡°ê°€ Routerì˜ ì¶œë°œì ì´ë‹¤
